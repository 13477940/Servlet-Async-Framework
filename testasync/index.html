<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Test Async</title>
		<link rel="stylesheet" href="/testasync/css/module/controller/controller.css">
		<script src="/testasync/js/axios/axios.min.js"></script>
		<script src="/testasync/js/jquery/jquery.slim.min.js"></script>
		<script src="/testasync/js/module/public/public.js"></script>
		<script>
			$(function(){
				website.script("/testasync/js/module/index/index.js", function(){
					console.log("done");
				});
				/* 壓力測試
				for(var i = 0, len = 1000; i < len; i++) {
					var targetFile = $("#upfile")[0]["files"][0];
					(function(){
						var reqObj = {
							url: "/testasync/index",
							data: [
								{ key: "a", value: "100" },
								{ key: "b", value: "ABC" },
								{ key: "c", value: "國字測試" }
							]
						};
						if(null != targetFile) {
							reqObj.data.push({
								key: "myfile",
								value: targetFile
							});
						}
						website.post_form_data(reqObj)
							.progress(function(prog){
								console.log(prog);
							})
							.done(function(respd){
								console.log(respd);
							});
					})();
				}*/
				// dropdown demo
				(function(){
					var dropdown_list = [
						"<div style='padding: 15px 20px;color: #000;'>option 1</div>",
						"<div style='padding: 15px 20px;color: #000;'>option 2</div>",
						"<div style='padding: 15px 20px;color: #000;'>option 3</div>"
					]
					website.dropdown($("div[ui_key=test_dropdown]"), dropdown_list).done(function(dropdown){
						console.log(dropdown);
					});
				})();
			});
		</script>
	</head>
	<body>
		<div style="padding: 20px;">
			<div>TEST PAGE</div>
			<div style="height: 20px;"></div>
			<div style="display: flex;align-items: center;">
				<div><input id="upfile" type="file" /></div>
				<div style="width: 20px;"></div>
				<div><button id="upok" style="padding: 10px 20px 10px 20px;">上傳檔案</button></div>
			</div>
			<div style="height: 20px;"></div>
			<div><button ui_key="open_dialog" style="padding: 10px 20px 10px 20px;">Open Dialog</button></div>
			<div style="height: 20px;"></div>
			<div ui_key="test_dropdown" style="display: flex;"></div>
		</div>
	</body>
</html>
