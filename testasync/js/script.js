"use strict";var website=window.website||{},$=window.$||null,axios=window.axios||null;website.script=function(e,o){if(Array.isArray(e))for(var a=0,n=e.length;a<n;a++)t(e[a]);else t(e);function t(e){var a=document.createElement("script");a.src=e,a.onload=o,document.head.appendChild(a)}},website.randomString=function(e){var a="abcdefghijklmnopqrstuvwxyz0123456789",o=[],n=16,t=a.length;null!=e&&(n=e);for(var r=0;r<n;r++){var i=a.charAt(Math.floor(Math.random()*t));o.push(i)}return o.join("")},website.get=function(t){var a=$.Deferred();if(null!=t.header&&0==Array.isArray(t.header))return console.error("header 參數必須使用 array 型態"),void a.reject();var r={};if(!function(){var e,a=t.header;for(e in a){var o=a[e],n=o.key,o=o.value;r[n]=o}}(),null!=t.data&&0==Array.isArray(t.data))return console.error("data 參數必須使用 array 型態"),void a.reject();var i=new URLSearchParams;!function(){var e,a=t.data;for(e in a){var o=a[e],n=o.key,o=o.value;i.append(n,o)}}();var e={transformResponse:[function(e){return e}],headers:r,params:i};return axios.get(t.url,e).then(function(e){e={status:"done",status_code:e.status,data:e.data};a.resolve(e.data)}).catch(function(e){a.reject(e)}),a},website.post=function(t){var a=$.Deferred();if(null!=t.header&&0==Array.isArray(t.header))return console.error("header 參數必須使用 array 型態"),void a.reject();var r={};if(!function(){var e,a=t.header;for(e in a){var o=a[e],n=o.key,o=o.value;r[n]=o}}(),null!=t.data&&0==Array.isArray(t.data))return console.error("data 參數必須使用 array 型態"),void a.reject();var i=new URLSearchParams;!function(){var e,a=t.data;for(e in a){var o=a[e],n=o.key,o=o.value;i.append(n,o)}}();var e={transformResponse:[function(e){return e}],headers:r};return axios.post(t.url,i,e).then(function(e){e={status:"done",status_code:e.status,data:e.data};a.resolve(e.data)}).catch(function(e){a.reject(e)}),a},website.post_json=function(t){var a=$.Deferred();if(null!=t.header&&0==Array.isArray(t.header))return console.error("header 參數必須使用 array 型態"),void a.reject();var r={};!function(){var e,a=t.header;for(e in a){var o=a[e],n=o.key,o=o.value;r[n]=o}}();return axios.post(t.url,t.text).then(function(e){e={status:"done",status_code:e.status,data:e.data};a.resolve(e.data)}).catch(function(e){a.reject(e)}),a},website.post_form_data=function(t){var a=$.Deferred();if(null!=t.header&&0==Array.isArray(t.header))return console.error("header 參數必須使用 array 型態"),void a.reject();var r={};if(!function(){var e,a=t.header;for(e in a){var o=a[e],n=o.key,o=o.value;r[n]=o}}(),null!=t.data&&0==Array.isArray(t.data))return console.error("data 參數必須使用 array 型態"),void a.reject();var n=new FormData;!function(){if(null!=t.data){var e,a=t.data;for(e in a){var o=a[e];n.append(o.key,o.value)}}}();var e={transformResponse:[function(e){return e}],headers:r,onUploadProgress:function(e){e=Math.round(100*e.loaded/e.total),e={status:"upload_progress",progress_value:String(e)};a.notify(e)}};return axios.post(t.url,n,e).then(function(e){e={status:"done",status_code:e.status,data:e.data};a.resolve(e.data)}).catch(function(e){a.reject(e)}),a},website.dialog=function(e){var a,o=$.Deferred(),n=website.randomString(16),t=$(((a=[]).push("<div modal_dialog_key='overlay' style='display: none;position: fixed;top: 0px;left: 0px;height: 100vh;width: 100vw;overflow: auto;'>"),a.push("<div modal_dialog_key='wrap' style='margin: auto'></div>"),a.push("</div>"),a.join("")));t.attr("modal_dialog_ssid",n),t.css("z-index","10"),t.css("background-color","rgba(245,245,245,0.5)"),null!=e.content&&0<e.content.length&&t.find("div[modal_dialog_key=wrap]").append(e.content),$("body").append(t),t.css("display","flex");e={dialog:t.find("div[modal_dialog_key=wrap]"),overlay:t,close:function(){t.remove()}};return o.resolve(e),o},website.dropdown=function(a,o){var e,n=$.Deferred(),t=null,r=website.randomString(12);(e=[]).push("<div dropdown_ssid='"+r+"' ui_type='dropdown'>"),e.push("<div ui_type='dropdown_label' style='position: relative;z-index: 2;'>dropdown label</div>"),e.push("<div ui_type='dropdown_list' style='display: none;position: absolute;max-height: 400px;'></div>"),e.push("</div>");var i=(t=$(e.join(""))).find("div[ui_type=dropdown_list]");i.css("z-index","3"),function(){if(null!=o)for(var e=0,a=o.length;e<a;e++)i.append(o[e])}();var d=t.find("div[ui_type=dropdown_label]"),l=!1,s=$("<div dropdown_overlay='"+r+"' style='position: fixed;top: 0px;left: 0px;z-index: 1;width: 100vw;height: 100vh;'></div>");function u(){i.css("display","none"),$("div[dropdown_overlay='"+r+"']").remove(),l=!1}return d.on("click",function(){l?u():(i.css("display","block"),$("body").append(s),s.on("click",function(){u()}),l=!0)}),function(){a.append(t);var e={dropdown:t,label:d,list:i};n.resolve(e)}(),n},website.redirect=function(e,a){null==a&&(a=!0);var o=null,o=null==e?location.protocol+"//"+location.host+location.pathname:e;a?location.href=o:(a=Date.now(),location.href=o+"?ei="+a)};$=window.$||null;!function(){var a,o=[];function n(){null==website.ready?console.error("該頁面不具有 window.website.ready 方法，無法完成初始化呼叫"):setTimeout(function(){website.ready()},1)}o.push("/testasync/js/jquery/jquery.min.js"),o.push("/testasync/js/axios/axios.min.js"),a=null,function e(){a=o.shift();null!=a?website.script(a,function(){e()}):n()}()}(),website.ready=function(){"index"===$("body").attr("page_key")&&($("#btn_select_file").on("click",function(){$("#upfile").click()}),$("#label_select_file").html("[未選擇檔案]"),$("#upfile").on("change",function(){var e=$("#upfile")[0].files[0];null!=e?$("#label_select_file").html(e.name):$("#label_select_file").html("[未選擇檔案]")}),$("#btn_upload_submit").on("click",function(){var e,a=$("#upfile")[0].files[0];e={url:"/testasync/index",data:[{key:"a",value:"100"},{key:"b",value:"ABC"},{key:"c",value:"國字測試"}]},null!=a&&e.data.push({key:"myfile",value:a}),website.post_form_data(e).progress(function(e){console.log(e)}).done(function(e){console.log(e)})}),$("button[ui_key=btn_open_dialog]").on("click",function(){website.dialog({content:"<div style='position: relative; width: 400px;height: 400px;margin: auto 0px auto 0px;background-color: #fff;border-radius: 5px;'><span dialog_btn='close' style='position: absolute;top: 20px;right: 20px;'>&times;</span>TEST</div>"}).done(function(e){console.log(e),e.overlay.css("background-color","rgba(190,190,190,0.5)"),e.dialog.find("span[dialog_btn=close]").on("click",function(){e.close()})})}),$("button[ui_key=btn_test_get]").on("click",function(){website.get({url:"/testasync/index",data:[{key:"a",value:"100"},{key:"b",value:"ABC"},{key:"c",value:"國字測試"},{key:"d",value:"/// //aaa// a//cc[]///"}],header:[{key:"my-auth",value:"aaabbbcccdddeeefffggg_hi"}]}).done(function(e){console.log(e)})}),$("button[ui_key=btn_test_post]").on("click",function(){website.post({url:"/testasync/index",data:[{key:"a",value:"100"},{key:"b",value:"ABC"},{key:"c",value:"國字測試"},{key:"d",value:"/// //aaa// a//cc[]///"}]}).done(function(e){console.log(e)})}),website.dropdown($("div[ui_key=btn_dropdown]"),["<div style='padding: 15px 20px;color: #000;'>option 1</div>","<div style='padding: 15px 20px;color: #000;'>option 2</div>","<div style='padding: 15px 20px;color: #000;'>option 3</div>","<div style='padding: 15px 20px;color: #000;'>option 4</div>","<div style='padding: 15px 20px;color: #000;'>option 5</div>"]).done(function(e){console.log(e)}),setTimeout(function(){website.get({url:"/testasync/index",data:[{key:"A",value:"100"},{key:"B",value:"200"},{key:"C",value:"300"}]}).done(function(e){e=JSON.parse(e);console.log(e)})},1e3))};